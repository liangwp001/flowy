{% macro status_badge(status, size='', modern=false) -%}
{% if modern %}
    {% set status_classes = {
        'pending': 'pending',
        'running': 'running',
        'completed': 'completed',
        'failed': 'failed'
    } %}
    {% set status_icons = {
        'pending': 'clock',
        'running': 'arrow-repeat',
        'completed': 'check-circle',
        'failed': 'x-circle'
    } %}
    <div class="status-badge {{ status_classes.get(status, 'pending') }} {{ size }}">
        <i class="bi bi-{{ status_icons.get(status, 'question-circle') }}"></i>
        {% if status == 'pending' %}等待中{% elif status == 'running' %}运行中{% elif status == 'completed' %}已完成{% elif status == 'failed' %}失败{% else %}{{ status }}{% endif %}
    </div>
{% else %}
    {% set status_classes = {
        'pending': 'bg-secondary',
        'running': 'bg-primary',
        'completed': 'bg-success',
        'failed': 'bg-danger'
    } %}
    {% set status_texts = {
        'pending': '等待中',
        'running': '运行中',
        'completed': '已完成',
        'failed': '失败'
    } %}
    <span class="badge {{ status_classes.get(status, 'bg-secondary') }} {{ size }}">
        <i class="bi bi-{% if status == 'pending' %}clock{% elif status == 'running' %}arrow-repeat{% elif status == 'completed' %}check-circle{% elif status == 'failed' %}x-circle{% else %}question-circle{% endif %}"></i>
        {{ status_texts.get(status, status) }}
    </span>
{% endif %}
{%- endmacro %}